Настройки:
1. Пользователи и группы
2. О правах и их получении
3. ААА/РАМ 
4. Системные настройки

1. Пользователи и группы -------------------

Пользователи: суперпользователь и обычные

Группы бывают первичные и дополнительные

инф. о группах и польз-ях хранится в :
/etc/passwd     - основн. инф. о поль-ле: имя, ид, ид первич. гр., ...
/etc/shadow     - инф. для аутентификации польз.: пароль и др.
/etc/group      - инф. о гр.

Права:
1. суперпользователь (root/система)
2. Непривилигированный польз-ль

Надо периодически проверить файлы /etc/passwd и /etc/shadow
на наличие дополнительных польз-ей с ид=0 (root)
(в /etc/passwd  - 3-е поле)

Привилигированные порты < 1024 (к ним нет доступа непривилиг. польз-ей)

Переход на root:
su -
или
sudo su    (если у root нет пароля)
или
sudo -s

passwd      - сменить пароль

su  - утилита негибкая, не настраив-я 
sudo    - гибкая, настраиваемая, не требует пароль root

sudo -l     - показ. что доступно

su - user2      - смена поль-ля на user2

PAM     - Pluggable authetication modules (Подключ.-е модули аутен-ии).
Позволяем гибко настраивать ААА

PAM:
* service
* type
    * Auth      - authetication
    * Account   - authorization
    * password  - password manipulatoin
    * session   - accounting/hooks
* control
    * required
    * requisite
    * sufficient
    * optional

Настройки: /etc/pam.d/

Как отличить привилигированного пол-ля от неприв-го:
символ в начале командной строки:
$    - непривилиг.
#    - привилиг.

id=0    - root, у остальных id > 0

useradd     - добавить учет. запись:
    * редактирует /etc/passwd, /etc/shadow, /etc/group и /etc/gshadow;
    * создает и заполняет домашний каталог для нового пользователя;
    * устанавливает разрешения и права собственности на домашний каталог.

useradd [options] username
    -m      - создать домашний каталог 
    -g      - добавить в указан. группу

useradd -m -g new_user group123

-------------- Системные настройки ------------

Имя системы
Время 
Пользователи 
Ограничения пользователей 
Умолчания для пользователей 
Настройки доступа 
Пользователи и группы 
Периодические задачи


Управление польз-ями и группами:
    useradd/adduser
    usermod     - редактирование пользователя
    groupadd
    groupdel
    groupmod
    groups
    vipw        - редактирование в ручную файлов /etc/passwd
    vipw -s     - редактирование в ручную файлов /etc/shadow
    файлы/каталоги:
        /etc/passwd, /etc/shadow
        /etc/group 
        /etc/login.defs 
        /etc/skel


------------- Периодические задачи:
    crontab      - файлы, где описыв. период. задачи
        user 
        system
    at           - более удобн. утилита, чем cron

crontab -e      - редакт./созд. файла расписания для тек.польз-я
crontab -l	    - содерж. расписания текущего пользователя
crontab -r	    - Удаление файла расписания тек.польз.
crontab -u user	 - Работа с расписаниями конкретных пользователей. Доступно только суперпользователю<

Каждая запись в crontab состоит из шести полей, 
указываемых в следующем порядке:

user:
minute(s) hour(s) day(s) month(s) weekday(s) command(s)
Пример: 5 1 12 6 * echo test > /dev/null    (12 июня 1:05)
        * * * * *       - каждую минуту
        1 * * * *       - первую минуту каждого часа
*  - каждый интервал (для weekday(s))

system:
minute(s) hour(s) day(s) month(s) weekday(s) user command(s)


date    - показ. дату и время
date --date "1 day ago" +%Y/%d/%m    - показ. другое время


-------------- Ограничения пользователя:
Пример: ограничить кол-во запущен.процессов или файлов

ulimit       - утилита для управл. ограничениями

Редактируя файл:
/etc/security/limits.conf

Бывают мягкие и жесткие ограничения

С точки зрения системы каждое открытое сетевое соединение 
- это открытый файл

-------------- Умолчания для пользователя:
Настройки:  /etc/login.defs
Здесь можно поменять umask для новых пользователей
