# https://losst.ru/rezervnoe-kopirovanie-ubuntu

# Способ 1. Список пакетов
# вернете все ранее установленные программы
# Для выполнения резервной копии 
dpkg --get-selections | grep -v deinstall > backup.txt
# Далее, скопируйте полученный файл в надежное место. 
# Когда система сломается, переустановите ее с установочного носителя, 
# а затем просто выполните команды:
sudo dpkg --set-selections < backup.txt
sudo apt -y update
sudo apt-get dselect-upgrade
# Файл со списком пакетов нужно поместить в текущую папку

# Способ 2. Создание архива
# Более надежно, поскольку вы не просто создаете список 
# установленных программ, а делаете архив из всей файловой системе
sudo tar czf /backup.tar.gz --exclude=/backup.tar.gz --exclude=/home --exclude=/media --exclude=/dev --exclude=/mnt --exclude=/proc --exclude=/sys --exclude=/tmp /
# вы получите полную резервную копию системы в корневом каталоге
# Если система повреждена, вам нужно загрузиться с LiveCD/USB, 
# и примонтировать корневой каталог в /mnt/. 
# Затем подключите носитель с резервной копией и выполните команду для распаковки:
sudo tar xf /run/media/имя_носителя/backup.tar.gz -C /mnt
# перезагрузить компьютер
# Здесь не восстанавливается только загрузчик, восстановить Grub нужно отдельно если он был поврежден

# Способ 3. Резервное копирование в rsync