## Основы безопасности сайта. Конспект

### 1.SQL-инъекция

SQL-инъекция - внедрение вредоносного кода в запрос к БД.

Как делают:

-   вставка в форму SQL-кода в одинарных кавычках

Как защититься:

-   подготовленные запросы с масками ($db->prepare('... WHERE id=:id ...'))

### 2. XSS (межсайтовый скриптинг)

XSS атака - внедрение вредоносного кода в выдываемую веб-страницу для взаимодействия с сайтом злоумышленника.

Как делают:

-   вставка кода в форму (например, тега "script" со своим кодом)
-   вставка кода в адресную строку

Как защититься:

-   обработать пользовательский ввод (например, с помощью функций strip_tags(), htmlspecialchars())
-   не выводить на странице необработанные гет-параметры
-   ?? отправлять определённые заголовки для обозначения допустимых ресурсов
-   ?? использовать мета-теги, которые блокируют обращение на сторонние ресурсы
-   использовать HTTP-only куки (не доступны из JavaScript через document.cookie)

### 3. Проблемы безопасности, связанные с нулевым байтом

Как делают:

```php
$file = $_GET['file']; // "../../etc/passwd\0"
if (file_exists('/home/wwwrun/'.$file.'.php')) {
    // file_exists возвратит true, т.к. /home/wwwrun/../../etc/passwd существует
    include '/home/wwwrun/'.$file.'.php';
    // будет подключён файл /etc/passwd
}

```

Как защититься:

-   проверять данные на использования только разрешённых файлов

### 4. Использование сообщений об ошибках

Сообщение об ошибках могут дать информацию, пригодную для взлома.

Как делают:

-   запустить отладочный механизм, подбирая основные признаки отладки. Пример:

```html
<form method="post" action="attacktarget?errors=Y&amp;showerrors=1&amp;debug=1">
    <input type="hidden" name="errors" value="Y" />
    <input type="hidden" name="showerrors" value="1" />
    <input type="hidden" name="debug" value="1" />
</form>
```

Как защититься:

-   использование функции error_reporting()
